{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Settings.vue?73c6","webpack:///./src/components/MainWindow.vue?4ecd","webpack:///./assets/fish.png","webpack:///./assets/shark.svg","webpack:///./src/App.vue","webpack:///./src/App.vue?97f5","webpack:///./src/views/Home.vue","webpack:///./src/components/MainWindow.vue","webpack:///./src/models/Boid.ts","webpack:///./src/models/Point.ts","webpack:///./src/models/rules/BoundRule.ts","webpack:///./src/models/flocks/IFlock.ts","webpack:///./src/models/rules/IRule.ts","webpack:///./src/models/rules/SeparationRule.ts","webpack:///./src/models/flocks/PredatorFlock.ts","webpack:///./src/models/rules/AlignmentRule.ts","webpack:///./src/models/rules/CohesionRule.ts","webpack:///./src/models/rules/EatRule.ts","webpack:///./src/models/flocks/PreyFlock.ts","webpack:///./src/models/flocks/WallFlock.ts","webpack:///./src/models/flocks/FlockApplication.ts","webpack:///./src/models/MainApplication.ts","webpack:///./src/components/Settings.vue","webpack:///./src/models/flocks/FlockView.ts","webpack:///./src/models/ColorSolver.js","webpack:///./src/models/Hex2RGB.js","webpack:///./src/components/Settings.vue?024a","webpack:///./src/components/Settings.vue?87e7","webpack:///./src/components/MainWindow.vue?0c87","webpack:///./src/components/MainWindow.vue?b3f0","webpack:///./src/views/Home.vue?26af","webpack:///./src/views/Home.vue?c772","webpack:///./src/router/index.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","script","render","class","msg","id","pos","vel","MAX_VEL","size","graphics_","this","pos_","x","x_","y","y_","vel_","size_","other","angle","isNull","center","clone","subP","centerNorm","norm2","pNorm","cosAlpha","dotProd","Math","acos","velMag","max","divS","multS","Point","sqrt","scalar","current","turn","Xmax","Ymax","Xmin","Ymin","color","name_","rules_","boids_","others_","color_","amount","b","createRandomBoid","app_","stage","addChild","draw","random","width_","height_","boid","limitVelocity","applyOthers","addP","forEach","flock","applyFlock","position","clear","lineStyle","moveTo","lineTo","closePath","params_","dist","mag","boids","rule","inView","PI","randomNum","pred","cnt","removeBoidFromApp","applyFlockRule","interactions_","on","e","down","wall","global","beginFill","drawCircle","endFill","walls_","flocks_","createRandomBoids","view","move","update","width","height","MainApplication","backgroundColor","antialias","autoDensity","renderer","min","round","removeChild","style","alt","src","href","start","startStop","multiple","flocks","header","counter","isPreyFlock","icon","deleteFlock","type","changeColor","$event","noBoidsToAdd","addBoids","isSeparation","changeIcon","preySelected","placeholder","flockName","addFlock","ref","overlayValue","togglePanel","app","cnts_","adds_","idx","indexOf","Color","g","set","clamp","sin","cos","multiply","matrix","newR","newG","newB","linear","slope","intercept","h","Solver","target","targetHSL","hsl","reusedColor","solveNarrow","solveWide","values","loss","filter","css","A","a","best","Infinity","initial","spsa","wide","A1","iters","alpha","gamma","bestLoss","deltas","Array","highArgs","lowArgs","k","ck","pow","lossDiff","ak","fix","filters","invert","sepia","saturate","hueRotate","brightness","contrast","colorHSL","abs","fmt","multiplier","RGB_HEX","hex2RGB","str","String","match","short","long","Number","parseInt","from","map","$nextTick","animate","changeLogoColor","event","panel","$refs","op","toggle","logos","document","querySelectorAll","colorInputs","logo","input","rgb","toString","padStart","solver","res","solve","ticker","add","val","newFlock","removeFlockFromApp","setup","innerWidth","innerHeight","canvas","getElementById","appendChild","components","Settings","MainWindow","routes","path","component","router","history","App","use","mount"],"mappings":"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","file":"js/app.b465ed40.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/boids_vue3/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Settings.vue?vue&type=style&index=0&id=84a6a5f6&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MainWindow.vue?vue&type=style&index=0&id=83b05f42&lang=css\"","module.exports = __webpack_public_path__ + \"img/fish.6f1fc584.png\";","module.exports = __webpack_public_path__ + \"img/shark.7f2f0dd2.svg\";","<template>\n  <router-view/>\n</template>\n","import { render } from \"./App.vue?vue&type=template&id=cf80cf12\"\nconst script = {}\nscript.render = render\n\nexport default script","<template>\n  <div class=\"home\">\n    <MainWindow msg=\"Welcome to Your Vue.js + TypeScript App\"/>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport MainWindow from '@/components/MainWindow.vue' // @ is an alias to /src\n\n@Options({\n  components: {\n    MainWindow\n  }\n})\nexport default class Home extends Vue {}\n</script>\n","<template>\n  <div id=\"main\">\n    <div id=\"settings\">\n      <Settings />\n    </div>\n    <div id=\"canvas\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport MainApplication from '@/models/MainApplication'\nimport { Options, Vue } from 'vue-class-component'\nimport Settings from '@/components/Settings.vue'\n\n@Options({\n  components: {\n    Settings\n  }\n})\nexport default class MainWindow extends Vue {\n  created () : void {\n    MainApplication.setup(window.innerWidth * 0.8, window.innerHeight * 0.99)\n  }\n\n  mounted () : void {\n    const canvas = document.getElementById('canvas') as HTMLDivElement\n    canvas.appendChild(MainApplication.app_.view)\n  }\n}\n</script>\n\n<style>\nhtml, body {\n  margin: 0;\n}\n\n#settings {\n  width: 20%;\n  float:left;\n}\n\n#canvas {\n  overflow: hidden;\n}\n</style>\n","import Point from './Point'\nimport { Graphics } from 'pixi.js'\n\nexport default class Boid {\n  public readonly MAX_VEL\n  public readonly pos_: Point\n  public readonly vel_: Point\n  public graphics_ = new Graphics()\n  public size_\n\n  constructor (pos: Point, vel: Point, MAX_VEL = 3, size = 3) {\n    this.pos_ = pos\n    this.graphics_.x = pos.x_\n    this.graphics_.y = pos.y_\n    this.vel_ = vel\n    this.MAX_VEL = MAX_VEL\n    this.size_ = size\n  }\n\n  // checks for distance and angle of view.\n  // the angle parameter goes from 0 to PI\n  inView (other: Boid, angle : number) : boolean {\n    if (this.vel_.isNull()) return false\n    const center : Point = this.vel_.clone()\n    const pos : Point = other.pos_.clone().subP(this.pos_)\n    const centerNorm : number = center.norm2()\n    const pNorm : number = pos.norm2()\n    const cosAlpha = center.dotProd(pos) / (centerNorm * pNorm)\n    return Math.acos(cosAlpha) <= angle\n  }\n\n  limitVelocity () : void {\n    const velMag = this.vel_.norm2()\n    const max = Math.max(this.MAX_VEL - this.size_ * 0.3, 0.4)\n    if (velMag > max) {\n      this.vel_.divS(velMag).multS(max)\n    }\n  }\n}\n","export default class Point {\n    public x_: number\n    public y_: number\n\n    constructor (x: number, y: number) {\n      this.x_ = x\n      this.y_ = y\n    }\n\n    clone () : Point {\n      return new Point(this.x_, this.y_)\n    }\n\n    isNull () : boolean {\n      return this.x_ === 0 && this.y_ === 0\n    }\n\n    dist (other: Point) : number {\n      const x = other.x_ - this.x_\n      const y = other.y_ - this.y_\n      return Math.sqrt(x * x + y * y)\n    }\n\n    // add with a point\n    addP (other: Point) : Point {\n      this.x_ += other.x_\n      this.y_ += other.y_\n      return this\n    }\n\n    // add with a scalar\n    addS (scalar: number) : Point {\n      this.x_ += scalar\n      this.y_ += scalar\n      return this\n    }\n\n    subP (other: Point) : Point {\n      this.x_ -= other.x_\n      this.y_ -= other.y_\n      return this\n    }\n\n    norm2 () : number {\n      return Math.sqrt(this.x_ * this.x_ + this.y_ * this.y_)\n    }\n\n    dotProd (other: Point) : number {\n      return this.x_ * other.x_ + this.y_ * other.y_\n    }\n\n    divS (scalar: number) : Point {\n      this.x_ /= scalar\n      this.y_ /= scalar\n      return this\n    }\n\n    multS (scalar: number) : Point {\n      this.x_ *= scalar\n      this.y_ *= scalar\n      return this\n    }\n}\n","import Boid from '../Boid'\n\n// @param turn Determines how hard a boid should turn around when reaching a boundary\nexport function apply (current: Boid, turn: number, Xmax: number, Ymax: number,\n  Xmin = 0, Ymin = 0) : void {\n  const x = current.pos_.x_\n  const y = current.pos_.y_\n\n  if (x < Xmin) {\n    current.vel_.x_ += turn\n  } else if (x > Xmax) {\n    current.vel_.x_ -= turn\n  }\n  if (y < Ymin) {\n    current.vel_.y_ += turn\n  } else if (y > Ymax) {\n    current.vel_.y_ -= turn\n  }\n}\n","import Boid from '../Boid'\nimport Point from '../Point'\nimport * as Bound from '../rules/BoundRule'\nimport MainApplication from '../MainApplication'\nimport IRule from '../rules/IRule'\n\nexport default abstract class IFlock {\n  name_: string\n  rules_: IRule[]\n  boids_: Boid[]\n  color_: number\n  readonly others_: IFlock[]\n\n  constructor (name: string, color = 0x000000) {\n    this.name_ = name\n    this.rules_ = []\n    this.boids_ = []\n    this.others_ = []\n    this.color_ = color\n  }\n\n  createRandomBoids (amount = 1, MAX_VEL = 3, size = 3) : void {\n    for (let i = 0; i < amount; ++i) {\n      const b = this.createRandomBoid(MAX_VEL, size)\n      this.boids_.push(b)\n      MainApplication.app_.stage.addChild(b.graphics_)\n    }\n    this.draw()\n  }\n\n  createRandomBoid (MAX_VEL = 3, size = 3) : Boid {\n    return new Boid(\n      new Point(Math.random() * MainApplication.width_ / 2, Math.random() * MainApplication.height_ / 2),\n      new Point(Math.random() * 2 - 1, Math.random() * 2 - 1),\n      MAX_VEL,\n      size)\n  }\n\n  apply (boid: Boid) : void {\n    Bound.apply(boid, 1, MainApplication.width_ / 2, MainApplication.height_ / 2)\n    boid.limitVelocity()\n    this.applyOthers(boid)\n    boid.pos_.addP(boid.vel_)\n  }\n\n  applyOthers (boid: Boid) : void {\n    this.others_.forEach(flock => {\n      flock.applyFlock(boid)\n    })\n  }\n\n  draw () : void {\n    this.boids_.forEach(boid => {\n      boid.graphics_.position.x = boid.pos_.x_\n      boid.graphics_.position.y = boid.pos_.y_\n      boid.graphics_\n        .clear()\n        .lineStyle(boid.size_, this.color_)\n        .moveTo(boid.pos_.x_, boid.pos_.y_)\n        .lineTo(boid.pos_.x_ + boid.vel_.x_ * boid.size_, boid.pos_.y_ + boid.vel_.y_ * boid.size_)\n        .closePath()\n    })\n  }\n\n  abstract isPreyFlock () : boolean\n\n  abstract applyFlock (boid: Boid) : void\n\n  abstract move () : void\n}\n","import Boid from '../Boid'\n\nexport default abstract class IRule {\n  name_: string\n  params_: { [id: string]: number} = {}\n\n  constructor (name: string) {\n    this.name_ = name\n  }\n\n  abstract isSeparation () : boolean\n\n  abstract apply (current: Boid, boids: Boid[]) : void\n}\n","import Boid from '../Boid'\nimport Point from '../Point'\nimport IRule from './IRule'\n\nexport default class CohesionRule extends IRule {\n  constructor (name: string, dist: number, angle: number, mag: number) {\n    super(name)\n    this.params_.dist = dist\n    this.params_.angle = angle\n    this.params_.mag = mag\n  }\n\n  isSeparation () : boolean {\n    return true\n  }\n\n  apply (current: Boid, boids: Boid[]) : void {\n    const rule: Point = new Point(0, 0)\n    boids.forEach(b => {\n      if (current !== b) {\n        if (current.pos_.dist(b.pos_) < this.params_.dist && current.inView(b, this.params_.angle)) {\n          rule.x_ += (current.pos_.x_ - b.pos_.x_)\n          rule.y_ += (current.pos_.y_ - b.pos_.y_)\n        }\n      }\n    })\n\n    rule.multS(this.params_.mag)\n    current.vel_.addP(rule)\n  }\n}\n","import Boid from '../Boid'\nimport MainApplication from '../MainApplication'\nimport IFlock from './IFlock'\nimport SeparationRule from '@/models/rules/SeparationRule'\n\nexport default class PredatorFlock extends IFlock {\n  constructor (name: string, color = 0x000000) {\n    super(name, color)\n    this.rules_.push(new SeparationRule('Separation', 25, Math.PI, 0.5))\n  }\n\n  isPreyFlock () : boolean {\n    return false\n  }\n\n  applyFlock (boid: Boid) : void {\n    const rule = new SeparationRule('Separation', MainApplication.randomNum(1, 35), Math.PI * 0.4, 0.1)\n    rule.apply(boid, this.boids_)\n  }\n\n  move () : void {\n    this.boids_.forEach(pred => {\n      this.rules_.forEach(r => {\n        r.apply(pred, this.boids_)\n      })\n      this.apply(pred)\n    })\n    this.draw()\n  }\n}\n","import Boid from '../Boid'\nimport Point from '../Point'\nimport IRule from './IRule'\n\nexport default class AlignmentRule extends IRule {\n  constructor (name: string, dist: number, angle: number, mag: number) {\n    super(name)\n    this.params_.dist = dist\n    this.params_.angle = angle\n    this.params_.mag = mag\n  }\n\n  isSeparation () : boolean {\n    return false\n  }\n\n  apply (current: Boid, boids: Boid[]) : void {\n    const rule: Point = new Point(0, 0)\n    let cnt = 0\n    boids.forEach(b => {\n      if (current.pos_.dist(b.pos_) < this.params_.dist && current.inView(b, this.params_.angle)) {\n        rule.addP(b.vel_)\n        cnt++\n      }\n    })\n    if (cnt !== 0) {\n      rule.divS(cnt).subP(current.vel_).multS(this.params_.mag)\n      current.vel_.addP(rule)\n    }\n  }\n}\n","import Boid from '../Boid'\nimport Point from '../Point'\nimport IRule from './IRule'\n\nexport default class CohesionRule extends IRule {\n  constructor (name: string, dist: number, angle: number, mag: number) {\n    super(name)\n    this.params_.dist = dist\n    this.params_.angle = angle\n    this.params_.mag = mag\n  }\n\n  isSeparation () : boolean {\n    return false\n  }\n\n  apply (current: Boid, boids: Boid[]) : void {\n    const center: Point = new Point(0, 0)\n    let cnt = 0\n    boids.forEach(b => {\n      if (current.pos_.dist(b.pos_) < this.params_.dist && current.inView(b, this.params_.angle)) {\n        center.addP(b.pos_)\n        cnt++\n      }\n    })\n    if (cnt) {\n      center.divS(cnt).subP(current.pos_).multS(this.params_.mag)\n      current.vel_.addP(center)\n    }\n  }\n}\n","import Boid from '../Boid'\nimport MainApplication from '../MainApplication'\n\nexport function apply (current: Boid, boids: Boid[], dist: number) : boolean {\n  for (let i = 0; i < boids.length; ++i) {\n    if (current.pos_.dist(boids[i].pos_) < dist) {\n      MainApplication.removeBoidFromApp(boids[i])\n      boids.splice(i, 1)\n      return true\n    }\n  }\n  return false\n}\n","import AlignmentRule from '../rules/AlignmentRule'\nimport SeparationRule from '../rules/SeparationRule'\nimport CohesionRule from '../rules/CohesionRule'\nimport * as Eat from '../rules/EatRule'\nimport IFlock from './IFlock'\nimport Boid from '../Boid'\n\nexport default class PreyFlock extends IFlock {\n  applyFlockRule = new SeparationRule('Separation', 100, Math.PI * 0.4, -0.0005)\n  constructor (name: string, color = 0x000000) {\n    super(name, color)\n    this.rules_.push(new AlignmentRule('Alignment', 100, Math.PI * 0.3, 0.05))\n    this.rules_.push(new CohesionRule('Cohesion', 20, Math.PI * 0.3, 0.005))\n    this.rules_.push(new SeparationRule('Separation', 15, Math.PI, 0.05))\n  }\n\n  isPreyFlock () : boolean {\n    return true\n  }\n\n  applyFlock (boid: Boid) : void {\n    this.applyFlockRule.apply(boid, this.boids_)\n    if (Eat.apply(boid, this.boids_, boid.size_ * 0.5)) {\n      boid.size_++\n    }\n  }\n\n  move () : void {\n    this.boids_.forEach(boid => {\n      this.rules_.forEach(r => {\n        r.apply(boid, this.boids_)\n      })\n      this.apply(boid)\n    })\n    this.draw()\n  }\n}\n","import Boid from '../Boid'\nimport MainApplication from '../MainApplication'\nimport SeparationRule from '../rules/SeparationRule'\nimport IFlock from './IFlock'\nimport { InteractionEvent, Graphics } from 'pixi.js'\nimport Point from '../Point'\n\nexport default class WallFlock extends IFlock {\n  constructor (name: string) {\n    super(name)\n\n    MainApplication.interactions_\n      .on('mouseup', (e) => {\n        if (MainApplication.down) {\n          this.wall(e)\n        }\n      })\n      .on('mousemove', (e) => {\n        if (MainApplication.down) {\n          this.wall(e)\n        }\n      })\n  }\n\n  isPreyFlock () : boolean {\n    return false\n  }\n\n  wall (e: InteractionEvent) : void {\n    const p = new Point(e.data.global.x, e.data.global.y)\n    // this.drawWall(p)\n    const b = new Boid(p.divS(2), new Point(0, 0), 0xFF0000, 15)\n    this.boids_.push(b)\n    b.graphics_ = new Graphics()\n      .beginFill(0xA7A7A7, 1)\n      .drawCircle(b.pos_.x_ * 2, b.pos_.y_ * 2, b.size_)\n      .endFill()\n    MainApplication.app_.stage.addChild(b.graphics_)\n  }\n\n  applyFlock (boid: Boid) : void {\n    const rule = new SeparationRule('Separation', 10 + boid.size_, Math.PI, 0.1)\n    rule.apply(boid, this.boids_)\n  }\n\n  move (): void {\n    // wall does not move\n  }\n}\n","import FlockView from './FlockView'\nimport IFlock from './IFlock'\nimport PredatorFlock from './PredatorFlock'\nimport PreyFlock from './PreyFlock'\nimport WallFlock from './WallFlock'\n\nexport default class FlockApplication {\n  public walls_ = new WallFlock('Wall')\n  public flocks_: IFlock[] = [\n    new PredatorFlock('Predator', 0xFF0000),\n    new PreyFlock('Prey', 0x0000FF)\n  ]\n\n  constructor () {\n    this.flocks_[0].others_.push(this.flocks_[1])\n    this.flocks_[1].others_.push(this.flocks_[0])\n    this.flocks_[0].others_.push(this.walls_)\n    this.flocks_[1].others_.push(this.walls_)\n\n    this.flocks_[0].createRandomBoids(3, 2, 6)\n    this.flocks_[1].createRandomBoids(200, 3)\n  }\n\n  move (view: FlockView) : void {\n    this.flocks_.forEach(flock => flock.move())\n    view.update()\n  }\n}\n","import { Application, InteractionManager } from 'pixi.js'\nimport Boid from './Boid'\nimport FlockApplication from './flocks/FlockApplication'\nimport IFlock from './flocks/IFlock'\n\nexport default class MainApplication {\n  public static app_: Application\n  public static interactions_: InteractionManager\n  public static width_: number\n  public static height_: number\n  public static down = false\n\n  public static flocks_: FlockApplication\n\n  static setup (width: number, height: number) : void {\n    MainApplication.width_ = width\n    MainApplication.height_ = height\n\n    // canvas\n    MainApplication.app_ = new Application({\n      width: width,\n      height: height,\n      backgroundColor: 0xeff7fd,\n      antialias: false,\n      autoDensity: false\n    })\n\n    // mouse events\n    MainApplication.interactions_ = new InteractionManager(MainApplication.app_.renderer)\n    MainApplication.interactions_.on('mousedown', () => {\n      MainApplication.down = true\n    })\n    MainApplication.interactions_.on('mouseup', () => {\n      MainApplication.down = false\n    })\n\n    this.flocks_ = new FlockApplication()\n  }\n\n  static randomNum (min = 0, max = 1) : number {\n    return Math.round(min - 0.5 + Math.random() * (max - min + 1))\n  }\n\n  static removeBoidFromApp (boid: Boid) : void {\n    MainApplication.app_.stage.removeChild(boid.graphics_)\n  }\n\n  static removeFlockFromApp (flock: IFlock) : void {\n    for (let i = 0; i < flock.boids_.length; ++i) {\n      MainApplication.removeBoidFromApp(flock.boids_[i])\n    }\n    flock.boids_ = []\n  }\n}\n","<template>\n  <Button v-if=\"!this.start\" class=\"start-btn p-button-success\" @click=\"startStop()\">\n    <i class=\"pi pi-play\" style=\"margin: auto\" />\n  </Button>\n  <Button v-else class=\"start-btn p-button-warning\" @click=\"startStop()\">\n    <i class=\"pi pi-pause\" style=\"margin: auto\" />\n  </Button>\n  <br />\n  <Accordion :multiple=true>\n    <AccordionTab v-for=\"flock in this.flocks.flocks_\" :key=\"flock.name_\">\n      <template #header>\n        <span>{{flock.name_}}</span>\n        <span style=\"margin: auto\"> {{ this.view.counter(flock) }} </span>\n        <img class=\"flock-logo\" v-if=\"flock.isPreyFlock()\" alt=\"logo\" src=\"../../assets/fish.png\" style=\"width: 1.5rem; margin-left: auto; margin-right: 0;\" />\n        <img class=\"flock-logo\" v-else alt=\"logo\" src=\"../../assets/shark.svg\" style=\"width: 1.5rem; margin-left: auto; margin-right: 0;\" />\n        <Button class=\"p-button-text p-button-danger\" icon=\"pi pi-trash\" @click=\"deleteFlock(flock)\" />\n      </template>\n\n      <table style=\"width:100%\">\n        <tr>\n          <td> Color: </td>\n          <td>\n            <input class=\"color-input\" type=\"color\" @change=\"changeColor($event, flock)\" />\n          </td>\n        </tr>\n        <tr>\n          <td> Add boids: </td>\n          <td>\n            <input type=\"number\" value=\"0\" @change=\"noBoidsToAdd($event, flock)\" />\n            <Button class=\"p-button-text\" icon=\"pi pi-plus\" style=\"padding: 0;\" @click=\"addBoids(flock)\" />\n          </td>\n        </tr>\n        <tr v-for=\"rule in flock.rules_\" :key=\"rule.name_\">\n          <td style=\"width: 30%\"> {{ rule.name_ }} </td>\n          <td>\n            <Slider v-if=\"rule.isSeparation()\" :min=\"0\" :max=\"30\" v-model=\"rule.params_.dist\"/>\n            <Slider v-else :min=\"0\" :max=\"120\" v-model=\"rule.params_.dist\"/>\n          </td>\n        </tr>\n      </table>\n    </AccordionTab>\n  </Accordion>\n  <div id=\"flock-input\">\n    <Button @click=\"changeIcon()\">\n      <img v-if=\"this.preySelected\" alt=\"logo\" src=\"../../assets/fish.png\" style=\"width: 1.5rem\" />\n      <img v-else alt=\"logo\" src=\"../../assets/shark.svg\" style=\"width: 1.5rem\" />\n    </Button>\n    <InputText id=\"add-flock-name\" placeholder=\"Flock name\" v-model=\"this.flockName\" />\n    <Button class=\"p-button-rounded p-button-text\" icon=\"pi pi-plus-circle\" @click=\"addFlock()\"/>\n  </div>\n\n  <OverlayPanel ref=\"op\">\n    This page simulates complex <b>flocking behaviour</b> as we can naturally see in birds or fishes.<br>\n    It is largely inspired by <a href=\"http://www.red3d.com/cwr/boids/\">Craig Reynolds' algorithm</a> as well as <a href=\"http://www.kfish.org/boids/pseudocode.html\">Conrad Parker's pseudocode</a>.<br>\n    <br>\n    Here you may:\n    <ul>\n      <li><Button class=\"p-button-success\" icon=\"pi pi-play\" /> Start the simulation.</li>\n      <li>Create new <b>flocks:</b> <br>\n      <Button>\n        <img alt=\"logo\" src=\"../../assets/fish.png\" style=\"width: 1.5rem\" />\n      </Button>\n      <b> Prey:</b> Preys are regular boids and will run away from predators.\n      <br>\n      <Button style=\"margin-top: 2px;\">\n        <img alt=\"logo\" src=\"../../assets/shark.svg\" style=\"width: 1.5rem\" />\n      </Button>\n      <b> Predator:</b> Predators swim toward any prey and will eat it if close enough!\n      </li>\n      <li>Change <b>rules: </b> <Slider v-model=\"this.overlayValue\" :min=\"0\" :max=\"100\" style=\"width: 50%; display: inline-block;\"> </Slider>\n        <ul>\n          <li><b>Alignment:</b> Fly towards nearby boids.</li>\n          <li><b>Cohesion:</b> Match the speed of near boids.</li>\n          <li><b>Separation:</b> Keep away from other boids. </li>\n          <li>The higher the slider, the more <b>impact</b> the rule will have.</li>\n        </ul>\n      </li>\n      <li>Click on the canvas to <b>draw walls</b>.</li>\n    </ul>\n  </OverlayPanel>\n\n  <a id=\"overlay-text\" href=\"javascript:void(0);\" @click=\"togglePanel($event)\">What is this?</a>\n  <a id=\"gh-pages\" href=\"https://github.com/zhujoel/boids_vue3\">By Joël ZHU</a>\n</template>\n\n<script lang=\"ts\">\nimport IFlock from '@/models/flocks/IFlock'\nimport PreyFlock from '@/models/flocks/PreyFlock'\nimport FlockView from '@/models/flocks/FlockView'\nimport MainApplication from '@/models/MainApplication'\nimport { Vue } from 'vue-class-component'\nimport PredatorFlock from '@/models/flocks/PredatorFlock'\nimport * as CS from '@/models/ColorSolver'\nimport * as H2RGB from '@/models/Hex2RGB'\nimport OverlayPanel from 'primevue/overlaypanel'\n\nexport default class Settings extends Vue {\n  start = false\n  flocks = MainApplication.flocks_\n  view = new FlockView(MainApplication.flocks_)\n  flockName = 'New Flock'\n  preySelected = true\n  overlayValue = 50\n\n  beforeMount () : void {\n    this.view.update()\n  }\n\n  mounted () : void {\n    this.$nextTick(() => {\n      this.animate()\n    })\n\n    this.changeLogoColor()\n  }\n\n  togglePanel (event: Event) : void {\n    const panel = this.$refs.op as OverlayPanel\n    panel.toggle(event)\n  }\n\n  changeLogoColor () : void {\n    const logos = document.querySelectorAll('.flock-logo')\n    const colorInputs = document.querySelectorAll('.color-input')\n    for (let i = 0; i < logos.length; ++i) {\n      const logo = logos[i] as any\n      const input = colorInputs[i] as any\n      const rgb = H2RGB.hex2RGB(this.flocks.flocks_[i].color_.toString(16).padStart(6, '0')) as number[]\n      input.value = '#' + this.flocks.flocks_[i].color_.toString(16).padStart(6, '0')\n      const c = new CS.Color(rgb[0], rgb[1], rgb[2])\n      const solver = new CS.Solver(c)\n      const res = solver.solve()\n      logo.style.filter = res.filter\n    }\n  }\n\n  animate () : void {\n    MainApplication.app_.ticker.add(() => {\n      if (this.start) {\n        MainApplication.flocks_.move(this.view)\n      }\n    })\n  }\n\n  changeColor (e: any, flock: IFlock) : void {\n    const val = e.target.value\n    const idx = this.flocks.flocks_.indexOf(flock)\n    MainApplication.flocks_.flocks_[idx].color_ = parseInt(val.slice(1), 16)\n    this.changeLogoColor()\n  }\n\n  noBoidsToAdd (e: any, flock: IFlock) : void {\n    const val = e.target.value\n    const idx = this.flocks.flocks_.indexOf(flock)\n    this.view.adds_[idx] = val\n  }\n\n  startStop () : void {\n    this.start = !this.start\n  }\n\n  changeIcon () : void {\n    this.preySelected = !this.preySelected\n  }\n\n  addBoids (flock: IFlock) : void {\n    const idx = this.flocks.flocks_.indexOf(flock)\n    const amount = this.view.adds_[idx]\n    MainApplication.flocks_.flocks_[idx].createRandomBoids(amount, 3)\n  }\n\n  addFlock () : void {\n    const newFlock = this.preySelected ? new PreyFlock(this.flockName) : new PredatorFlock(this.flockName)\n    newFlock.createRandomBoids(10)\n    MainApplication.flocks_.flocks_.forEach(flock => {\n      if ((newFlock instanceof PreyFlock && flock instanceof PredatorFlock) ||\n      newFlock instanceof PredatorFlock) {\n        flock.others_.push(newFlock)\n        newFlock.others_.push(flock)\n      }\n    })\n    newFlock.others_.push(MainApplication.flocks_.walls_)\n    this.flocks.flocks_.push(newFlock)\n  }\n\n  deleteFlock (flock: IFlock) : void {\n    const idx = this.flocks.flocks_.indexOf(flock)\n    MainApplication.removeFlockFromApp(MainApplication.flocks_.flocks_[idx])\n    this.flocks.flocks_.splice(idx, 1)\n  }\n}\n</script>\n\n<style>\n.start-btn {\n  width: 100%;\n}\n\ninput[type=number] {\n  -moz-appearance: textfield;\n  width: 50%;\n  border: 1px solid grey;\n  border-radius: 5px;\n}\n\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n#add-flock-name {\n  width: 60%;\n}\n\n.color-input {\n  border: 0;\n}\n\n#overlay-text {\n  position: absolute;\n  bottom: 5px;\n  left: 1px;\n  font-size: 10px;\n  background-color: white;\n}\n\n#gh-pages {\n  position: absolute;\n  bottom: 5px;\n  left: 15%;\n  font-size: 10px;\n  background-color: white;\n}\n\nli {\n  margin-top: 5px;\n}\n</style>\n","import FlockApplication from './FlockApplication'\nimport IFlock from './IFlock'\n\nexport default class FlockView {\n  app_: FlockApplication\n  cnts_ = [3, 200]\n  adds_ = [0, 0]\n\n  constructor (app: FlockApplication) {\n    this.app_ = app\n  }\n\n  update () : void {\n    for (let i = 0; i < this.app_.flocks_.length; ++i) {\n      this.cnts_[i] = this.app_.flocks_[i].boids_.length\n    }\n  }\n\n  counter (flock: IFlock) : number {\n    const idx = this.app_.flocks_.indexOf(flock)\n    return this.cnts_[idx]\n  }\n}\n","/* eslint-disable */\n// https://stackoverflow.com/questions/42966641/how-to-transform-black-into-any-given-color-using-only-css-filters\n\nexport class Color {\n    constructor(r, g, b) { this.set(r, g, b); }\n    toString() { return `rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`; }\n\n    set(r, g, b) {\n        this.r = this.clamp(r);\n        this.g = this.clamp(g);\n        this.b = this.clamp(b);\n    }\n\n    hueRotate(angle = 0) {\n        angle = angle / 180 * Math.PI;\n        let sin = Math.sin(angle);\n        let cos = Math.cos(angle);\n\n        this.multiply([\n            0.213 + cos * 0.787 - sin * 0.213, 0.715 - cos * 0.715 - sin * 0.715, 0.072 - cos * 0.072 + sin * 0.928,\n            0.213 - cos * 0.213 + sin * 0.143, 0.715 + cos * 0.285 + sin * 0.140, 0.072 - cos * 0.072 - sin * 0.283,\n            0.213 - cos * 0.213 - sin * 0.787, 0.715 - cos * 0.715 + sin * 0.715, 0.072 + cos * 0.928 + sin * 0.072\n        ]);\n    }\n\n    grayscale(value = 1) {\n        this.multiply([\n            0.2126 + 0.7874 * (1 - value), 0.7152 - 0.7152 * (1 - value), 0.0722 - 0.0722 * (1 - value),\n            0.2126 - 0.2126 * (1 - value), 0.7152 + 0.2848 * (1 - value), 0.0722 - 0.0722 * (1 - value),\n            0.2126 - 0.2126 * (1 - value), 0.7152 - 0.7152 * (1 - value), 0.0722 + 0.9278 * (1 - value)\n        ]);\n    }\n\n    sepia(value = 1) {\n        this.multiply([\n            0.393 + 0.607 * (1 - value), 0.769 - 0.769 * (1 - value), 0.189 - 0.189 * (1 - value),\n            0.349 - 0.349 * (1 - value), 0.686 + 0.314 * (1 - value), 0.168 - 0.168 * (1 - value),\n            0.272 - 0.272 * (1 - value), 0.534 - 0.534 * (1 - value), 0.131 + 0.869 * (1 - value)\n        ]);\n    }\n\n    saturate(value = 1) {\n        this.multiply([\n            0.213 + 0.787 * value, 0.715 - 0.715 * value, 0.072 - 0.072 * value,\n            0.213 - 0.213 * value, 0.715 + 0.285 * value, 0.072 - 0.072 * value,\n            0.213 - 0.213 * value, 0.715 - 0.715 * value, 0.072 + 0.928 * value\n        ]);\n    }\n\n    multiply(matrix) {\n        let newR = this.clamp(this.r * matrix[0] + this.g * matrix[1] + this.b * matrix[2]);\n        let newG = this.clamp(this.r * matrix[3] + this.g * matrix[4] + this.b * matrix[5]);\n        let newB = this.clamp(this.r * matrix[6] + this.g * matrix[7] + this.b * matrix[8]);\n        this.r = newR; this.g = newG; this.b = newB;\n    }\n\n    brightness(value = 1) { this.linear(value); }\n    contrast(value = 1) { this.linear(value, -(0.5 * value) + 0.5); }\n\n    linear(slope = 1, intercept = 0) {\n        this.r = this.clamp(this.r * slope + intercept * 255);\n        this.g = this.clamp(this.g * slope + intercept * 255);\n        this.b = this.clamp(this.b * slope + intercept * 255);\n    }\n\n    invert(value = 1) {\n        this.r = this.clamp((value + (this.r / 255) * (1 - 2 * value)) * 255);\n        this.g = this.clamp((value + (this.g / 255) * (1 - 2 * value)) * 255);\n        this.b = this.clamp((value + (this.b / 255) * (1 - 2 * value)) * 255);\n    }\n\n    hsl() { // Code taken from https://stackoverflow.com/a/9493060/2688027, licensed under CC BY-SA.\n        let r = this.r / 255;\n        let g = this.g / 255;\n        let b = this.b / 255;\n        let max = Math.max(r, g, b);\n        let min = Math.min(r, g, b);\n        let h, s, l = (max + min) / 2;\n\n        if(max === min) {\n            h = s = 0;\n        } else {\n            let d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            } h /= 6;\n        }\n\n        return {\n            h: h * 100,\n            s: s * 100,\n            l: l * 100\n        };\n    }\n\n    clamp(value) {\n        if(value > 255) { value = 255; }\n        else if(value < 0) { value = 0; }\n        return value;\n    }\n}\n\nexport class Solver {\n    constructor(target) {\n        this.target = target;\n        this.targetHSL = target.hsl();\n        this.reusedColor = new Color(0, 0, 0); // Object pool\n    }\n\n    solve() {\n        let result = this.solveNarrow(this.solveWide());\n        return {\n            values: result.values,\n            loss: result.loss,\n            filter: this.css(result.values)\n        };\n    }\n\n    solveWide() {\n        const A = 5;\n        const c = 15;\n        const a = [60, 180, 18000, 600, 1.2, 1.2];\n\n        let best = { loss: Infinity };\n        for(let i = 0; best.loss > 25 && i < 3; i++) {\n            let initial = [50, 20, 3750, 50, 100, 100];\n            let result = this.spsa(A, a, c, initial, 1000);\n            if(result.loss < best.loss) { best = result; }\n        } return best;\n    }\n\n    solveNarrow(wide) {\n        const A = wide.loss;\n        const c = 2;\n        const A1 = A + 1;\n        const a = [0.25 * A1, 0.25 * A1, A1, 0.25 * A1, 0.2 * A1, 0.2 * A1];\n        return this.spsa(A, a, c, wide.values, 500);\n    }\n\n    spsa(A, a, c, values, iters) {\n        const alpha = 1;\n        const gamma = 0.16666666666666666;\n\n        let best = null;\n        let bestLoss = Infinity;\n        let deltas = new Array(6);\n        let highArgs = new Array(6);\n        let lowArgs = new Array(6);\n\n        for(let k = 0; k < iters; k++) {\n            let ck = c / Math.pow(k + 1, gamma);\n            for(let i = 0; i < 6; i++) {\n                deltas[i] = Math.random() > 0.5 ? 1 : -1;\n                highArgs[i] = values[i] + ck * deltas[i];\n                lowArgs[i]  = values[i] - ck * deltas[i];\n            }\n\n            let lossDiff = this.loss(highArgs) - this.loss(lowArgs);\n            for(let i = 0; i < 6; i++) {\n                let g = lossDiff / (2 * ck) * deltas[i];\n                let ak = a[i] / Math.pow(A + k + 1, alpha);\n                values[i] = fix(values[i] - ak * g, i);\n            }\n\n            let loss = this.loss(values);\n            if(loss < bestLoss) { best = values.slice(0); bestLoss = loss; }\n        } return { values: best, loss: bestLoss };\n\n        function fix(value, idx) {\n            let max = 100;\n            if(idx === 2 /* saturate */) { max = 7500; }\n            else if(idx === 4 /* brightness */ || idx === 5 /* contrast */) { max = 200; }\n\n            if(idx === 3 /* hue-rotate */) {\n                if(value > max) { value = value % max; }\n                else if(value < 0) { value = max + value % max; }\n            } else if(value < 0) { value = 0; }\n            else if(value > max) { value = max; }\n            return value;\n        }\n    }\n\n    loss(filters) { // Argument is array of percentages.\n        let color = this.reusedColor;\n        color.set(0, 0, 0);\n\n        color.invert(filters[0] / 100);\n        color.sepia(filters[1] / 100);\n        color.saturate(filters[2] / 100);\n        color.hueRotate(filters[3] * 3.6);\n        color.brightness(filters[4] / 100);\n        color.contrast(filters[5] / 100);\n\n        let colorHSL = color.hsl();\n        return Math.abs(color.r - this.target.r)\n            + Math.abs(color.g - this.target.g)\n            + Math.abs(color.b - this.target.b)\n            + Math.abs(colorHSL.h - this.targetHSL.h)\n            + Math.abs(colorHSL.s - this.targetHSL.s)\n            + Math.abs(colorHSL.l - this.targetHSL.l);\n    }\n\n    css(filters) {\n        function fmt(idx, multiplier = 1) { return Math.round(filters[idx] * multiplier); }\n        return `invert(${fmt(0)}%) sepia(${fmt(1)}%) saturate(${fmt(2)}%) hue-rotate(${fmt(3, 3.6)}deg) brightness(${fmt(4)}%) contrast(${fmt(5)}%)`;\n    }\n}","/* eslint-disable */\nconst RGB_HEX = /^#?(?:([\\da-f]{3})[\\da-f]?|([\\da-f]{6})(?:[\\da-f]{2})?)$/i;\n\nexport const hex2RGB = str => {\n  const [ , short, long ] = String(str).match(RGB_HEX) || [];\n\n  if (long) {\n    const value = Number.parseInt(long, 16);\n    return [ value >> 16, value >> 8 & 0xFF, value & 0xFF ];\n  } else if (short) {\n    return Array.from(short, s => Number.parseInt(s, 16)).map(n => (n << 4) | n);\n  }\n};","\nimport IFlock from '@/models/flocks/IFlock'\nimport PreyFlock from '@/models/flocks/PreyFlock'\nimport FlockView from '@/models/flocks/FlockView'\nimport MainApplication from '@/models/MainApplication'\nimport { Vue } from 'vue-class-component'\nimport PredatorFlock from '@/models/flocks/PredatorFlock'\nimport * as CS from '@/models/ColorSolver'\nimport * as H2RGB from '@/models/Hex2RGB'\nimport OverlayPanel from 'primevue/overlaypanel'\n\nexport default class Settings extends Vue {\n  start = false\n  flocks = MainApplication.flocks_\n  view = new FlockView(MainApplication.flocks_)\n  flockName = 'New Flock'\n  preySelected = true\n  overlayValue = 50\n\n  beforeMount () : void {\n    this.view.update()\n  }\n\n  mounted () : void {\n    this.$nextTick(() => {\n      this.animate()\n    })\n\n    this.changeLogoColor()\n  }\n\n  togglePanel (event: Event) : void {\n    const panel = this.$refs.op as OverlayPanel\n    panel.toggle(event)\n  }\n\n  changeLogoColor () : void {\n    const logos = document.querySelectorAll('.flock-logo')\n    const colorInputs = document.querySelectorAll('.color-input')\n    for (let i = 0; i < logos.length; ++i) {\n      const logo = logos[i] as any\n      const input = colorInputs[i] as any\n      const rgb = H2RGB.hex2RGB(this.flocks.flocks_[i].color_.toString(16).padStart(6, '0')) as number[]\n      input.value = '#' + this.flocks.flocks_[i].color_.toString(16).padStart(6, '0')\n      const c = new CS.Color(rgb[0], rgb[1], rgb[2])\n      const solver = new CS.Solver(c)\n      const res = solver.solve()\n      logo.style.filter = res.filter\n    }\n  }\n\n  animate () : void {\n    MainApplication.app_.ticker.add(() => {\n      if (this.start) {\n        MainApplication.flocks_.move(this.view)\n      }\n    })\n  }\n\n  changeColor (e: any, flock: IFlock) : void {\n    const val = e.target.value\n    const idx = this.flocks.flocks_.indexOf(flock)\n    MainApplication.flocks_.flocks_[idx].color_ = parseInt(val.slice(1), 16)\n    this.changeLogoColor()\n  }\n\n  noBoidsToAdd (e: any, flock: IFlock) : void {\n    const val = e.target.value\n    const idx = this.flocks.flocks_.indexOf(flock)\n    this.view.adds_[idx] = val\n  }\n\n  startStop () : void {\n    this.start = !this.start\n  }\n\n  changeIcon () : void {\n    this.preySelected = !this.preySelected\n  }\n\n  addBoids (flock: IFlock) : void {\n    const idx = this.flocks.flocks_.indexOf(flock)\n    const amount = this.view.adds_[idx]\n    MainApplication.flocks_.flocks_[idx].createRandomBoids(amount, 3)\n  }\n\n  addFlock () : void {\n    const newFlock = this.preySelected ? new PreyFlock(this.flockName) : new PredatorFlock(this.flockName)\n    newFlock.createRandomBoids(10)\n    MainApplication.flocks_.flocks_.forEach(flock => {\n      if ((newFlock instanceof PreyFlock && flock instanceof PredatorFlock) ||\n      newFlock instanceof PredatorFlock) {\n        flock.others_.push(newFlock)\n        newFlock.others_.push(flock)\n      }\n    })\n    newFlock.others_.push(MainApplication.flocks_.walls_)\n    this.flocks.flocks_.push(newFlock)\n  }\n\n  deleteFlock (flock: IFlock) : void {\n    const idx = this.flocks.flocks_.indexOf(flock)\n    MainApplication.removeFlockFromApp(MainApplication.flocks_.flocks_[idx])\n    this.flocks.flocks_.splice(idx, 1)\n  }\n}\n","import { render } from \"./Settings.vue?vue&type=template&id=84a6a5f6\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport \"./Settings.vue?vue&type=style&index=0&id=84a6a5f6&lang=css\"\nscript.render = render\n\nexport default script","\nimport MainApplication from '@/models/MainApplication'\nimport { Options, Vue } from 'vue-class-component'\nimport Settings from '@/components/Settings.vue'\n\n@Options({\n  components: {\n    Settings\n  }\n})\nexport default class MainWindow extends Vue {\n  created () : void {\n    MainApplication.setup(window.innerWidth * 0.8, window.innerHeight * 0.99)\n  }\n\n  mounted () : void {\n    const canvas = document.getElementById('canvas') as HTMLDivElement\n    canvas.appendChild(MainApplication.app_.view)\n  }\n}\n","import { render } from \"./MainWindow.vue?vue&type=template&id=83b05f42\"\nimport script from \"./MainWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./MainWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./MainWindow.vue?vue&type=style&index=0&id=83b05f42&lang=css\"\nscript.render = render\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport MainWindow from '@/components/MainWindow.vue' // @ is an alias to /src\n\n@Options({\n  components: {\n    MainWindow\n  }\n})\nexport default class Home extends Vue {}\n","import { render } from \"./Home.vue?vue&type=template&id=774f172d\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router'\nimport Home from '../views/Home.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n})\n\nexport default router\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nimport PrimeVue from 'primevue/config'\nimport Button from 'primevue/button'\nimport Accordion from 'primevue/accordion'\nimport AccordionTab from 'primevue/accordiontab'\nimport Slider from 'primevue/slider'\nimport InputText from 'primevue/inputtext'\nimport ColorPicker from 'primevue/colorpicker'\nimport InputNumber from 'primevue/inputnumber'\nimport ScrollPanel from 'primevue/scrollpanel'\nimport OverlayPanel from 'primevue/overlaypanel'\n\nimport 'primevue/resources/themes/saga-blue/theme.css'\nimport 'primevue/resources/primevue.min.css'\nimport 'primeicons/primeicons.css'\n\ncreateApp(App)\n  .use(router)\n  .use(PrimeVue)\n  .component('Button', Button)\n  .component('Accordion', Accordion)\n  .component('AccordionTab', AccordionTab)\n  .component('Slider', Slider)\n  .component('InputText', InputText)\n  .component('ColorPicker', ColorPicker)\n  .component('InputNumber', InputNumber)\n  .component('ScrollPanel', ScrollPanel)\n  .component('OverlayPanel', OverlayPanel)\n  .mount('#app')\n"],"sourceRoot":""}